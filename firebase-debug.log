[debug] [2019-05-03T16:47:09.384Z] ----------------------------------------------------------------------
[debug] [2019-05-03T16:47:09.388Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\ptoma\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2019-05-03T16:47:09.388Z] CLI Version:   6.7.1
[debug] [2019-05-03T16:47:09.388Z] Platform:      win32
[debug] [2019-05-03T16:47:09.388Z] Node Version:  v8.12.0
[debug] [2019-05-03T16:47:09.389Z] Time:          Fri May 03 2019 18:47:09 GMT+0200 (Romance Summer Time)
[debug] [2019-05-03T16:47:09.389Z] ----------------------------------------------------------------------
[debug] 
[debug] [2019-05-03T16:47:09.402Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2019-05-03T16:47:09.403Z] > authorizing via signed-in user
[debug] [2019-05-03T16:47:09.403Z] [iam] checking project saucychat-5454e for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2019-05-03T16:47:09.406Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/saucychat-5454e:testIamPermissions  

[debug] [2019-05-03T16:47:10.412Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'saucychat-5454e'...
[info] 
[info] i  deploying functions
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] Running command: npm --prefix functions run build
[info] +  functions: Finished running predeploy script.
[debug] [2019-05-03T16:47:38.612Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "main": "lib/index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "firebase-admin": "~7.0.0",
    "firebase-functions": "^2.2.0"
  },
  "devDependencies": {
    "tslint": "^5.12.0",
    "typescript": "^3.2.2"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2019-05-03T16:47:38.615Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudfunctions.googleapis.com/projectSettings/saucychat-5454e?view=CONSUMER_VIEW  
 
[debug] [2019-05-03T16:47:38.616Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/runtimeconfig.googleapis.com/projectSettings/saucychat-5454e?view=CONSUMER_VIEW  
 
[debug] [2019-05-03T16:47:40.116Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:40.162Z] <<< HTTP RESPONSE 200
[info] +  functions: all necessary APIs are enabled
[debug] [2019-05-03T16:47:40.167Z] >>> HTTP REQUEST GET https://cloudresourcemanager.googleapis.com/v1/projects/saucychat-5454e  
 
[debug] [2019-05-03T16:47:41.139Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:41.140Z] >>> HTTP REQUEST GET https://mobilesdk-pa.googleapis.com/v1/projects/393049617371:getServerAppConfig  
 
[debug] [2019-05-03T16:47:41.446Z] <<< HTTP RESPONSE 200
[info] i  functions: preparing functions directory for uploading...
[debug] [2019-05-03T16:47:41.456Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/saucychat-5454e/configs  
 
[debug] [2019-05-03T16:47:42.675Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged functions (36.51 KB) for uploading
[debug] [2019-05-03T16:47:43.211Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/saucychat-5454e/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2019-05-03T16:47:43.699Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:43.701Z] >>> HTTP REQUEST PUT https://storage.googleapis.com/gcf-upload-us-central1-2203ee54-7bd2-4c4b-8100-8c285dea508d/45508b9f-fed1-464e-a7e7-2443ca66c729.zip?GoogleAccessId=service-393049617371@gcf-admin-robot.iam.gserviceaccount.com&Expires=1556903861&Signature=B3UZ5tpiVY6vAWFdt3%2B0spoFr3%2F4JNlf5toDftpWY7zwuM7z%2BGj8GbqmxtQLOCtIq%2Bn22trMBLt4O7O4BlYYhNPMtZ5EQG5ci2goqHtZVwaKzGiC28iPtSYvaJDlb0ElVDeFNe3KlFmmKMjaEfmTQ4sVblvxzNJMgolHXD5ko6MoBtHVgjgv4hFY10Wtcd2bktawD%2Fvy3tjQH7AhWgrSQd4D5Zu%2FqBWtNrsV1rZVdQ5EswXPaUn%2BpKjuVxh6oxBgfaaO0PZa2TwevA0RwmoJ%2BOhfyYfkNtofH1XkjaqAlCI79HeetoznrmR3rl8JAbg1JdH8Nq45XwShBMfp2aHsbA%3D%3D  

[debug] [2019-05-03T16:47:44.335Z] <<< HTTP RESPONSE 200
[info] +  functions: functions folder uploaded successfully
[debug] [2019-05-03T16:47:44.346Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/saucychat-5454e/locations/-/functions  
 
[debug] [2019-05-03T16:47:45.030Z] <<< HTTP RESPONSE 200
[info] i  functions: updating Node.js 6 function messages(us-central1)...
[debug] [2019-05-03T16:47:45.046Z] Trigger is:  {"httpsTrigger":{}}
[info] i  functions: updating Node.js 6 function triggerNewMessage(us-central1)...
[debug] [2019-05-03T16:47:45.049Z] Trigger is:  {"eventTrigger":{"resource":"projects/saucychat-5454e/databases/(default)/documents/messages/{messageId}","eventType":"providers/cloud.firestore/eventTypes/document.create","service":"firestore.googleapis.com"}}
[info] i  functions: updating Node.js 6 function uploadNewMessageImage(us-central1)...
[debug] [2019-05-03T16:47:45.051Z] Trigger is:  {"eventTrigger":{"resource":"projects/_/buckets/saucychat-5454e.appspot.com","eventType":"google.storage.object.finalize","service":"storage.googleapis.com"}}
[debug] [2019-05-03T16:47:45.055Z] >>> HTTP REQUEST GET https://servicemanagement.googleapis.com/v1/services/cloudscheduler.googleapis.com/projectSettings/saucychat-5454e?view=CONSUMER_VIEW  
 
[debug] [2019-05-03T16:47:46.668Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:46.675Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/saucychat-5454e/locations/us-central1/functions/messages {"updateMask":"sourceUploadUrl,name,labels,httpsTrigger"} 

[debug] [2019-05-03T16:47:46.682Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/saucychat-5454e/locations/us-central1/functions/triggerNewMessage {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 

[debug] [2019-05-03T16:47:46.685Z] >>> HTTP REQUEST PATCH https://cloudfunctions.googleapis.com/v1/projects/saucychat-5454e/locations/us-central1/functions/uploadNewMessageImage {"updateMask":"sourceUploadUrl,name,labels,eventTrigger.resource,eventTrigger.eventType,eventTrigger.service"} 

[debug] [2019-05-03T16:47:47.107Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:47.385Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:47.445Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:47.449Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/projects/saucychat-5454e/locations/-/functions  
 
[debug] [2019-05-03T16:47:48.205Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:48.208Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:47:48.209Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:47:48.210Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:47:48.716Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:48.720Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:48.724Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:50.721Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:47:50.727Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:47:50.728Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:47:51.185Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:51.232Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:51.233Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:53.187Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:47:53.234Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:47:53.236Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:47:53.508Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:53.644Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:53.713Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:55.511Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:47:55.646Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:47:55.715Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:47:55.967Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:55.992Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:56.115Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:57.968Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:47:57.993Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:47:58.116Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:47:58.432Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:58.470Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:47:58.565Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:00.435Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:48:00.472Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:48:00.566Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:48:00.888Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:00.938Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:01.050Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:02.891Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:48:02.939Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:48:03.051Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:48:03.309Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:03.367Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:03.411Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:05.312Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:48:05.369Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:48:05.415Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:48:05.772Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:05.840Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:05.881Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:07.773Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:48:07.841Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:48:07.882Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:48:08.059Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:08.337Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:08.352Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:10.061Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:48:10.340Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:48:10.354Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:48:10.526Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:10.804Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:10.821Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:12.527Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3VwbG9hZE5ld01lc3NhZ2VJbWFnZS9HeW80Tko3V3NOWQ  
 
[debug] [2019-05-03T16:48:12.807Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL3RyaWdnZXJOZXdNZXNzYWdlL1ducmNWQk1WTmZZ  
 
[debug] [2019-05-03T16:48:12.822Z] >>> HTTP REQUEST GET https://cloudfunctions.googleapis.com/v1/operations/c2F1Y3ljaGF0LTU0NTRlL3VzLWNlbnRyYWwxL21lc3NhZ2VzLzg1anZBM0FnS3JB  
 
[debug] [2019-05-03T16:48:13.014Z] <<< HTTP RESPONSE 200
[debug] [2019-05-03T16:48:13.074Z] <<< HTTP RESPONSE 200
[info] +  functions[triggerNewMessage(us-central1)]: Successful update operation. 
[debug] [2019-05-03T16:48:13.305Z] <<< HTTP RESPONSE 200
[info] +  functions[messages(us-central1)]: Successful update operation. 
